DOCUMENTA√á√ÉO DA API - ASTROLOGIC BACKEND
=========================================

URL BASE: https://astrologic-latest.onrender.com

---
1. ROTAS DO ASTROBOT (IA)
---

‚û§ POST /api/astro/
Descri√ß√£o: Envia uma mensagem para o AstroBot (Gemini) e recebe a resposta m√≠stica ou de leitura de mapa astral.
Autentica√ß√£o: N√£o obrigat√≥ria no momento.

Corpo da Requisi√ß√£o (JSON):
{
  "currentMessage": "Qual a vibe de hoje?",
  "history": [
    { "role": "user", "parts": [{ "text": "Ol√°" }] },
    { "role": "model", "parts": [{ "text": "Sou o AstroBot..." }] }
  ] // A propriedade history √© opcional, envie se quiser manter o contexto do chat
}

Exemplo com Fetch API (Frontend):
```javascript
const enviarMensagem = async () => {
  const response = await fetch('http://localhost:3000/api/astro/', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      currentMessage: 'Oi, queria saber meu mapa astral.'
    })
  });
  const data = await response.json();
  console.log(data.response);
};
```

---
2. ROTAS DE USU√ÅRIO (AUTENTICA√á√ÉO E CADASTRO)
---

‚û§ POST /api/users/register
Descri√ß√£o: Cria um novo usu√°rio no sistema (salvo no Supabase).
Corpo da Requisi√ß√£o (JSON):
{
  "nome": "Jo√£o da Silva",
  "email": "joao@email.com",
  "senha": "senha_segura_123",
  "idade": 25
}
// Retorna os dados do usu√°rio rec√©m-criado.

Exemplo de uso:
```javascript
const registrar = async () => {
  const response = await fetch('http://localhost:3000/api/users/register', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
       nome: 'Maria Silva',
       email: 'maria@astro.com',
       senha: '123',
       idade: 30
    })
  });
  const data = await response.json();
};
```

‚û§ POST /api/users/login
Descri√ß√£o: Realiza o login do usu√°rio retornando um Token JWT para uso nas rotas protegidas.
Corpo da Requisi√ß√£o (JSON):
{
  "email": "joao@email.com",
  "senha": "senha_segura_123"
}
// Retorna: { "message": "Login successful", "token": "eyJhb...", "user": {...} }

Exemplo de uso:
```javascript
const fazerLogin = async () => {
  const response = await fetch('http://localhost:3000/api/users/login', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ email: 'maria@astro.com', senha: '123' })
  });
  const data = await response.json();
  // Salvar data.token no localStorage ou cookie para usar depois
  localStorage.setItem('token', data.token);
};
```

‚û§ POST /api/users/logout
Descri√ß√£o: Faz o logout. Como usamos JWT, o backend apenas retorna sucesso, o frontend deve excluir o token salvo no localStorage/cookie.
Nenhum corpo de requisi√ß√£o necess√°rio.

‚û§ GET /api/users/
Descri√ß√£o: Retorna a lista de todos os usu√°rios cadastrados.

‚û§ GET /api/users/:id
Descri√ß√£o: Busca os dados de um usu√°rio espec√≠fico pelo ID.

‚û§ PUT /api/users/:id (ROTA PROTEGIDA üîí)
Descri√ß√£o: Atualiza as informa√ß√µes do usu√°rio.
Autentica√ß√£o: Exige cabe√ßalho "Authorization: Bearer <SEU_TOKEN_JWT>"
Corpo da Requisi√ß√£o (JSON) com os dados a serem atualizados:
{
  "nome": "Jo√£o Pedro Santos",
  "idade": 26
}

Exemplo de uso (com Token):
```javascript
const atualizarUsuario = async (userId) => {
  const token = localStorage.getItem('token');
  const response = await fetch(`http://localhost:3000/api/users/${userId}`, {
    method: 'PUT',
    headers: { 
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${token}` 
    },
    body: JSON.stringify({ nome: 'Nome Atualizado' })
  });
};
```

‚û§ DELETE /api/users/:id (ROTA PROTEGIDA üîí)
Descri√ß√£o: Exclui um usu√°rio do sistema pelo ID.
Autentica√ß√£o: Exige cabe√ßalho "Authorization: Bearer <SEU_TOKEN_JWT>"
```javascript
// Exemplo de cabe√ßalho id√™ntico √† rota PUT
```
